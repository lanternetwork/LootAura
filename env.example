# =============================================================================
# LOOTAURA ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains all environment variables needed for the LootAura application.
# Copy this file to .env.local and fill in your actual values.
#
# SCHEMA MIGRATION STRATEGY:
# - Legacy builds: Use 'public' schema (default if NEXT_PUBLIC_SUPABASE_SCHEMA not set)
# - V2 builds: Use 'lootaura_v2' schema (set NEXT_PUBLIC_SUPABASE_SCHEMA=lootaura_v2)
# - Production: Maintains backward compatibility with existing deployments
# =============================================================================

# =============================================================================
# CLOUDINARY CONFIGURATION (Optional)
# =============================================================================

# Cloudinary Cloud Name (PUBLIC - safe to expose to client)
# Get this from your Cloudinary dashboard
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your_cloud_name

# Cloudinary Upload Preset (PUBLIC - safe to expose to client)
# Create an unsigned upload preset in your Cloudinary dashboard
NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET=your_upload_preset

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================

# Supabase Project URL (PUBLIC - safe to expose to client)
# Get this from your Supabase project settings
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anonymous Key (PUBLIC - safe to expose to client)
# Get this from your Supabase project settings > API
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Supabase Service Role Key (SERVER-ONLY - never expose to client)
# Get this from your Supabase project settings > API
# WARNING: This key bypasses RLS and should only be used server-side
SUPABASE_SERVICE_ROLE=your_supabase_service_role_key_here

# =============================================================================
# SCHEMA CONFIGURATION
# =============================================================================

# Supabase Schema Selection
# - 'public': Legacy schema (default for existing production builds)
# - 'lootaura_v2': New V2 schema (default for pivot/property-pulse branch)
# - Not set: Falls back to 'public' schema for backward compatibility
NEXT_PUBLIC_SUPABASE_SCHEMA=lootaura_v2

# =============================================================================
# EXTERNAL API CONFIGURATION
# =============================================================================

# Mapbox Access Token (PUBLIC - safe to expose to client)
# Required for map functionality; restrict token to your domains when possible
# Get this from your Mapbox account
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=pk.eyJ...your_public_token...

# Geocoding (SERVER-ONLY)
# Required in production, optional in development (defaults to admin@lootaura.com)
# Email for Nominatim API politeness (required by OSM usage policy)
# All Nominatim requests include User-Agent header: "LootAura/1.0 ({email})"
NOMINATIM_APP_EMAIL=lanternetwork@gmail.com
MAPBOX_GEOCODING_ENDPOINT=https://api.mapbox.com/geocoding/v5/mapbox.places

# ZIP Code Writeback Configuration
# Enable automatic writeback of Nominatim results to database for future lookups
ENABLE_ZIP_WRITEBACK=true

# =============================================================================
# PUSH NOTIFICATIONS (VAPID)
# =============================================================================

# VAPID Public Key (PUBLIC - safe to expose to client)
# Generate with: npx web-push generate-vapid-keys
NEXT_PUBLIC_VAPID_PUBLIC_KEY=your_vapid_public_key_here

# VAPID Private Key (SERVER-ONLY - never expose to client)
# Generate with: npx web-push generate-vapid-keys
VAPID_PRIVATE_KEY=your_vapid_private_key_here

# =============================================================================
# MONITORING & ANALYTICS
# =============================================================================

# Sentry DSN (PUBLIC - safe to expose to client)
# Get this from your Sentry project settings
NEXT_PUBLIC_SENTRY_DSN=your_sentry_dsn_here

# =============================================================================
# RATE LIMITING (PRODUCTION)
# =============================================================================

# Rate Limiting Control (SERVER-ONLY)
# Enable/disable production rate limiting
# - true: Enable rate limiting in production
# - false: Disable rate limiting (default for dev/test)
RATE_LIMITING_ENABLED=true

# Upstash Redis Configuration (SERVER-ONLY)
# Optional: If not provided, rate limiting will use in-memory store
# Get these from your Upstash Redis database for production scaling
UPSTASH_REDIS_REST_URL=your_upstash_redis_url_here
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token_here

# =============================================================================
# SEO & MARKETING
# =============================================================================

# Site URL (PUBLIC - safe to expose to client)
# Used for canonical URLs and social sharing
NEXT_PUBLIC_SITE_URL=https://lootaura.com

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Manual Location Override (DEVELOPMENT ONLY)
# Format: "lat,lng,city" (e.g., "38.2527,-85.7585,Louisville")
# Used for testing geolocation functionality
MANUAL_LOCATION_OVERRIDE=

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# Google OAuth (PUBLIC - safe to expose to client)
# Enable/disable Google OAuth sign-in button
# - true: Enable Google OAuth (default)
# - false: Disable Google OAuth
NEXT_PUBLIC_GOOGLE_ENABLED=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Map Clustering (PUBLIC - safe to expose to client)
# Enable/disable client-side clustering for map markers
# - true: Enable clustering (default)
# - false: Disable clustering (fallback to individual markers)
NEXT_PUBLIC_FEATURE_CLUSTERING=true

# Debug Mode (PUBLIC - safe to expose to client)
# Enable/disable debug logging for development
# - true: Enable debug logs
# - false: Disable debug logs (default)
NEXT_PUBLIC_DEBUG=false

# Saved Presets (PUBLIC - safe to expose to client)
# Enable/disable saved search presets functionality
# - true: Enable preset menu and local/cloud storage
# - false: Disable preset functionality (default)
NEXT_PUBLIC_FLAG_SAVED_PRESETS=true

# Test/Demo Sales (PUBLIC - safe to expose to client)
# Enable/disable demo sales on landing page
# - true: Show demo sales on landing page when real sales are empty
# - false: Disable demo sales (default)
# Note: Demo sales are UI-only and never appear in map pins or API responses
NEXT_PUBLIC_ENABLE_TEST_SALES=false

# =============================================================================
# LEGACY CONFIGURATION (DEPRECATED)
# =============================================================================

# The following variables are from the legacy system and may be removed in future versions:
# - All legacy Supabase tables are in the 'public' schema
# - Legacy API routes use the original table structure
# - Legacy components use the original data models

# =============================================================================
# SCHEMA MIGRATION NOTES
# =============================================================================

# LEGACY SCHEMA (public):
# - Tables: yard_sales, profiles (old), account_deletion_requests
# - Used by: Existing production deployments
# - Migration: Gradual migration to lootaura_v2 schema

# V2 SCHEMA (lootaura_v2):
# - Tables: profiles, sales, items, favorites
# - Features: Enhanced RLS, performance indexes, updated_at triggers
# - Used by: New deployments and pivot/property-pulse branch

# BACKWARD COMPATIBILITY:
# - If NEXT_PUBLIC_SUPABASE_SCHEMA is not set, defaults to 'public'
# - Existing production builds continue to work unchanged
# - New features can use schema-qualified table names
# - Gradual migration path available

# =============================================================================
# EMAIL CONFIGURATION (Resend)
# =============================================================================

# Resend API Key (SERVER-ONLY - never expose to client)
# Get this from your Resend dashboard
RESEND_API_KEY=

# Resend From Email Address
# Must be a verified domain in your Resend account
RESEND_FROM_EMAIL=no-reply@lootaura.com

# Enable Email Sending
# - true: Enable email sending (production/preview)
# - false or unset: Disable email sending (development, safe for local testing)
LOOTAURA_ENABLE_EMAILS=true

# =============================================================================
# DEPLOYMENT STRATEGY
# =============================================================================

# PRODUCTION (Legacy):
# - Keep NEXT_PUBLIC_SUPABASE_SCHEMA unset or set to 'public'
# - Maintains existing functionality
# - No breaking changes

# PRODUCTION (V2):
# - Set NEXT_PUBLIC_SUPABASE_SCHEMA=lootaura_v2
# - Apply database migration
# - Deploy with new schema configuration

# DEVELOPMENT:
# - Use lootaura_v2 schema for new features
# - Test both schemas as needed
# - Maintain backward compatibility